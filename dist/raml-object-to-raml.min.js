(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ramlObjectToRaml=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var is=require("../utils/is");module.exports=function(documentation){return documentation.filter(function(document){return is.string(document.title)&&is.string(document.content)}).map(function(document){return{title:document.title,content:document.content}})}},{"../utils/is":13}],2:[function(require,module,exports){var extend=require("xtend/mutable");var is=require("../utils/is");var sanitizeSchemas=require("./schemas");var sanitizeParameters=require("./parameters");var sanitizeDocumentation=require("./documentation");var sanitizeSecuritySchemes=require("./security-schemes");var sanitizeResources=require("./resources");var sanitizeResourceTypes=require("./resource-types");var sanitizeTraits=require("./traits");var sanitizeSecuredBy=require("./secured-by");module.exports=function(input){var output={};if(is.string(input.title)){output.title=input.title}if(is.string(input.version)||is.number(input.version)){output.version=input.version}if(is.string(input.mediaType)){output.mediaType=input.mediaType}if(is.string(input.baseUri)){output.baseUri=input.baseUri}if(is.object(input.baseUriParameters)){output.baseUriParameters=sanitizeParameters(input.baseUriParameters)}if(is.array(input.documentation)){output.documentation=sanitizeDocumentation(input.documentation)}if(is.array(input.securitySchemes)){output.securitySchemes=sanitizeSecuritySchemes(input.securitySchemes)}if(is.array(input.schemas)){output.schemas=sanitizeSchemas(input.schemas)}if(is.array(input.resourceTypes)){output.resourceTypes=sanitizeResourceTypes(input.resourceTypes)}if(is.array(input.traits)){output.traits=sanitizeTraits(input.traits)}if(is.array(input.securedBy)){output.securedBy=sanitizeSecuredBy(input.securedBy)}if(is.array(input.resources)){extend(output,sanitizeResources(input.resources))}return output}},{"../utils/is":13,"./documentation":1,"./parameters":3,"./resource-types":4,"./resources":5,"./schemas":7,"./secured-by":8,"./security-schemes":9,"./traits":11,"xtend/mutable":22}],3:[function(require,module,exports){var extend=require("xtend/mutable");var is=require("../utils/is");var TYPES={string:true,number:true,integer:true,date:true,"boolean":true,file:true};var sanitizeParameter=function(param,key){var obj={};if(is.string(param.displayName)&&key!==param.displayName){obj.displayName=param.displayName}if(is.string(param.type)&&TYPES.hasOwnProperty(param.type)){obj.type=param.type}if(is.string(param.description)){obj.description=param.description}if(is.array(param.enum)){obj.enum=param.enum}if(is.string(param.pattern)){obj.pattern=param.pattern}if(is.number(param.minLength)){obj.minLength=param.minLength}if(is.number(param.maxLength)){obj.maxLength=param.maxLength}if(is.number(param.minimum)){obj.minimum=param.minimum}if(is.number(param.maximum)){obj.maximum=param.maximum}if(param.example!=null&&is.primitive(param.example)){obj.example=param.example}if(param.default!=null&&is.primitive(param.default)){obj.default=param.default}if(is.boolean(param.repeat)){obj.repeat=param.repeat}if(is.boolean(param.required)){obj.required=param.required}return obj};module.exports=function(params){var obj={};Object.keys(params).forEach(function(key){var param=params[key];if(is.array(param)){return obj[key]=param.map(sanitizeParameter)}obj[key]=sanitizeParameter(param,key)});return obj}},{"../utils/is":13,"xtend/mutable":22}],4:[function(require,module,exports){var is=require("../utils/is");var sanitizeTrait=require("./trait");var escape=function(str){return str.replace(/([\-])/g,"\\$1")};var METHOD_KEY_REGEXP=/^(?:GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)\??$/i;module.exports=function(resourceTypes){var array=[];resourceTypes.forEach(function(resourceTypeMap){Object.keys(resourceTypeMap).forEach(function(type){var obj={};var child=obj[type]={};var resourceType=resourceTypeMap[type];Object.keys(resourceType).forEach(function(key){var value=resourceType[key];var keys=["type","usage","description"];if(METHOD_KEY_REGEXP.test(key)){child[key]=value==null?value:sanitizeTrait(value)}if(~keys.indexOf(key)&&is.string(value)){child[key]=value}});array.push(obj)})});return array}},{"../utils/is":13,"./trait":10}],5:[function(require,module,exports){var extend=require("xtend/mutable");var is=require("../utils/is");var sanitizeTrait=require("./trait");var sanitizeParameters=require("./parameters");var sanitizeMethods=function(methods){var obj={};methods.forEach(function(method){var child=obj[method.method.toLowerCase()]={};if(is.array(method.is)){child.is=method.is}method.__METADATA__&&delete method.__METADATA__;if(method.body){method.body["application/json"]&&delete method.body["application/json"].name;method.body["application/json"]&&delete method.body["application/json"].schemaContent;method.body["application/x-www-form-urlencoded"]&&delete method.body["application/x-www-form-urlencoded"].name;method.body["application/x-www-form-urlencoded"]&&delete method.body["application/x-www-form-urlencoded"].schemaContent;method.body["multipart/form-data"]&&delete method.body["multipart/form-data"].name;method.body["multipart/form-data"]&&delete method.body["multipart/form-data"].schemaContent;method.body["application/xml"]&&delete method.body["application/xml"].name;method.body["application/xml"]&&delete method.body["application/xml"].schemaContent;method.body["text/xml"]&&delete method.body["text/xml"].name;method.body["text/xml"]&&delete method.body["text/xml"].schemaContent;method.body['"*/*"']&&delete method.body['"*/*"'].name;method.body['"*/*"']&&delete method.body['"*/*"'].schemaContent;if(method.body["application/x-www-form-urlencoded"]){if(method.body["application/x-www-form-urlencoded"].formParameters){for(var prop in method.body["application/x-www-form-urlencoded"].formParameters){for(var subprop in method.body["application/x-www-form-urlencoded"].formParameters[prop]){if(subprop!=="displayName"||subprop!=="type"||subprop!=="required"){delete method.body["application/x-www-form-urlencoded"].formParameters[prop][subprop]}}}}}if(method.body["multipart/form-data"]){if(method.body["multipart/form-data"].formParameters){for(var prop in method.body["multipart/form-data"].formParameters){for(var subprop in method.body["multipart/form-data"].formParameters[prop]){if(subprop!=="displayName"||subprop!=="type"||subprop!=="required"){delete method.body["multipart/form-data"].formParameters[prop][subprop]}}}}}}extend(child,sanitizeTrait(method))});return obj};module.exports=function sanitizeResources(resources){var obj={};resources.forEach(function(resource){var child=obj;if(resource.relativeUri){child=obj[resource.relativeUri]=obj[resource.relativeUri]||{}}if(resource.uriParameters){child.uriParameters=sanitizeParameters(resource.uriParameters)}if(is.string(resource.type)||is.object(resource.type)){child.type=resource.type}if(is.array(resource.is)){child.is=resource.is}if(is.string(resource.description)){child.description=resource.description}if(is.array(resource.methods)){extend(child,sanitizeMethods(resource.methods))}if(is.array(resource.resources)){extend(child,sanitizeResources(resource.resources))}});return obj}},{"../utils/is":13,"./parameters":3,"./trait":10,"xtend/mutable":22}],6:[function(require,module,exports){module.exports=function(responses){var obj={};Object.keys(responses).forEach(function(code){if(!/^\d{3}$/.test(code)){return}if(responses[code]){responses[code].code&&delete responses[code].code}if(responses[code].body){responses[code].body["application/json"]&&delete responses[code].body["application/json"].name;responses[code].body["application/json"]&&delete responses[code].body["application/json"].schemaContent;responses[code].body["application/x-www-form-urlencoded"]&&delete responses[code].body["application/x-www-form-urlencoded"].name;responses[code].body["application/x-www-form-urlencoded"]&&delete responses[code].body["application/x-www-form-urlencoded"].schemaContent;responses[code].body["multipart/form-data"]&&delete responses[code].body["multipart/form-data"].name;responses[code].body["multipart/form-data"]&&delete responses[code].body["multipart/form-data"].schemaContent;responses[code].body["application/xml"]&&delete responses[code].body["application/xml"].name;responses[code].body["application/xml"]&&delete responses[code].body["application/xml"].schemaContent;responses[code].body["text/xml"]&&delete responses[code].body["text/xml"].name;responses[code].body["text/xml"]&&delete responses[code].body["text/xml"].schemaContent;responses[code].body['"*/*"']&&delete responses[code].body['"*/*"'].name;responses[code].body['"*/*"']&&delete responses[code].body['"*/*"'].schemaContent}obj[code]=responses[code]});return obj}},{}],7:[function(require,module,exports){var is=require("../utils/is");module.exports=function(schemas){var array=[];schemas.forEach(function(schemaMap){Object.keys(schemaMap).forEach(function(key){if(!is.string(schemaMap[key])){return}var obj={};obj[key]=schemaMap[key];array.push(obj)})});return array}},{"../utils/is":13}],8:[function(require,module,exports){var is=require("../utils/is");module.exports=function(securedBy){return securedBy.filter(function(value){return is.null(value)||is.object(value)||is.string(value)})}},{"../utils/is":13}],9:[function(require,module,exports){var is=require("../utils/is");var sanitizeTrait=require("./trait");var AUTH_TYPES={"Basic Authentication":true,"Digest Authentication":true,"OAuth 1.0":true,"OAuth 2.0":true};module.exports=function(securitySchemes){var array=[];securitySchemes.forEach(function(schemeMap){Object.keys(schemeMap).forEach(function(key){var scheme=schemeMap[key];if(!AUTH_TYPES[scheme.type]&&!/^x-/i.test(scheme.type)){return}var obj={};var data=obj[key]={type:scheme.type};if(is.string(scheme.description)){data.description=scheme.description}if(is.object(scheme.describedBy)){data.describedBy=sanitizeTrait(scheme.describedBy)}if(is.object(scheme.settings)){data.settings=scheme.settings}array.push(obj)})});return array}},{"../utils/is":13,"./trait":10}],10:[function(require,module,exports){var is=require("../utils/is");var sanitizeResponses=require("./responses");var sanitizeParameters=require("./parameters");var sanitizeSecuredBy=require("./secured-by");module.exports=function(trait){var obj={};if(is.string(trait.usage)){obj.usage=trait.usage}if(is.string(trait.description)){obj.description=trait.description}if(is.object(trait.headers)){obj.headers=sanitizeParameters(trait.headers)}if(is.object(trait.queryParameters)){obj.queryParameters=sanitizeParameters(trait.queryParameters)}if(is.object(trait.body)){obj.body=trait.body}if(is.object(trait.responses)){obj.responses=sanitizeResponses(trait.responses)}if(is.array(trait.securedBy)){obj.securedBy=sanitizeSecuredBy(trait.securedBy)}return obj}},{"../utils/is":13,"./parameters":3,"./responses":6,"./secured-by":8}],11:[function(require,module,exports){var sanitizeTrait=require("./trait");module.exports=function(traits){var array=[];traits.forEach(function(traitMap){Object.keys(traitMap).forEach(function(key){var obj={};obj[key]=sanitizeTrait(traitMap[key]);array.push(obj)})});return array}},{"./trait":10}],12:[function(require,module,exports){var extend=require("xtend/mutable");var indent=require("indent-string");var repeat=require("repeat-string");var length=require("string-length");var is=require("./utils/is");var toString=Function.prototype.call.bind(Object.prototype.toString);var ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var QUOTED_CHARACTERS={};QUOTED_CHARACTERS[9]=true;QUOTED_CHARACTERS[10]=true;QUOTED_CHARACTERS[13]=true;QUOTED_CHARACTERS[33]=true;QUOTED_CHARACTERS[34]=true;QUOTED_CHARACTERS[35]=true;QUOTED_CHARACTERS[37]=true;QUOTED_CHARACTERS[38]=true;QUOTED_CHARACTERS[39]=true;QUOTED_CHARACTERS[42]=true;QUOTED_CHARACTERS[62]=true;QUOTED_CHARACTERS[64]=true;QUOTED_CHARACTERS[91]=true;QUOTED_CHARACTERS[93]=true;QUOTED_CHARACTERS[96]=true;QUOTED_CHARACTERS[123]=true;QUOTED_CHARACTERS[124]=true;QUOTED_CHARACTERS[125]=true;var NUMBER_REGEXP=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)"+"|[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?"+"|\\.[0-9_]+(?:[eE][-+][0-9]+)?"+"|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*"+"|[-+]?\\.(?:inf|Inf|INF)"+"|\\.(?:nan|NaN|NAN))$");var encodeHex=function(charCode){var string=charCode.toString(16).toUpperCase();var handle;var length;if(charCode<=255){handle="x";length=2}else if(charCode<=65535){handle="u";length=4}else if(charCode<=4294967295){handle="U";length=8}else{throw new Error("Character code within a string may not be greater than 0xFFFFFFFF")}return"\\"+handle+repeat("0",length-string.length)+string};var requiresEscape=function(charCode){return ESCAPE_SEQUENCES[charCode]||!(32<=charCode&&charCode<=126||133===charCode||160<=charCode&&charCode<=55295||57344<=charCode&&charCode<=65533||65536<=charCode&&charCode<=1114111)};var requiresQuotes=function(str){if(length(str)===0){return true}if(/^[ \-?]| $/.test(str)||NUMBER_REGEXP.test(str)){return true}for(var i=0;i<str.length;i++){var charCode=str.charCodeAt(i);if(requiresEscape(charCode)){return true}if(QUOTED_CHARACTERS[charCode]){return true}}return false};var escapeString=function(str){return str.split("").map(function(character){var charCode=character.charCodeAt(0);if(requiresEscape(charCode)){return ESCAPE_SEQUENCES[charCode]||escapeHex(charCode)}return character}).join("")};var wrapString=function(str){return'"'+escapeString(str)+'"'};var stringifyString=function(str){if(requiresQuotes(str)){return wrapString(str)}if(str==="null"||str==="true"||str==="false"){return wrapString(str)}return str};var arrayWithinLength=function(array,maxLength,opts){if(!array.length){return true}var total=4+(array.length-1)*2;return array.every(function(value){if(!is.primitive(value)){return false}total+=length(stringify(value,0,opts));return total<maxLength})};var stringifyArrayInline=function(array,level,opts){if(!array.length){return"[]"}return"[ "+array.map(function(value){if(is.string(value)&&value.indexOf(":")>-1){return wrapString(value)}if(is.null(value)){return"null"}return stringify(value,level,opts)}).join(", ")+" ]"};var stringWithinLength=function(str,maxLength,opts){if(/\r?\n/.test(str)){return false}return length(stringifyString(str))<maxLength};var stringifyStringMultiLine=function(str,level,opts){return indent(str,opts.indent,level)};var stringifyProperty=function(prefix,value,level,opts){var maxLength=opts.maxLength-length(prefix)-1;if(value==null){return prefix}if(is.array(value)&&arrayWithinLength(value,maxLength,opts)){return prefix+" "+stringifyArrayInline(value,level+1,opts)}if(is.string(value)&&!stringWithinLength(value,maxLength,opts)){return prefix+" |\n"+stringifyStringMultiLine(value,level+1,opts)}if(is.object(value)&&!Object.keys(value).length){return prefix+" {}"}if(is.primitive(value)){return prefix+" "+stringify(value,level+1,opts)}return prefix+"\n"+stringify(value,level+1,opts)};var stringifyObjectProperty=function(key,value,level,opts){var prefix=repeat(opts.indent,level)+key+":";return stringifyProperty(prefix,value,level,opts)};var stringifyObject=function(obj,level,opts){var keys=Object.keys(obj);return keys.map(function(key){return stringifyObjectProperty(key,obj[key],level,opts)}).join("\n")};var stringifyArrayProperty=function(value,level,opts){var prefix=repeat(opts.indent,level)+"-";if(is.object(value)){return prefix+" "+stringify(value,level+1,opts).replace(/^ +/,"")}if(is.string(value)&&value.indexOf(":")>-1){return prefix+" "+wrapString(value)}if(is.null(value)){return prefix+" null"}return stringifyProperty(prefix,value,level,opts)};var stringifyArray=function(array,level,opts){return array.map(function(value){return stringifyArrayProperty(value,level,opts)}).join("\n")};var TYPES={"[object String]":stringifyString,"[object Object]":stringifyObject,"[object Array]":stringifyArray,"[object Number]":String,"[object Boolean]":String};var stringify=function(input,level,opts){var type=toString(input);if(!TYPES[type]){return""}return TYPES[type](input,level,opts)};module.exports=function(input,opts){return stringify(input,0,extend({indent:"  ",maxLength:80},opts))}},{"./utils/is":13,"indent-string":14,"repeat-string":18,"string-length":19,"xtend/mutable":22}],13:[function(require,module,exports){var is=exports;var _toString=Object.prototype.toString;["String","Number","Boolean","RegExp","Object","Array","Function","Null","Undefined"].forEach(function(instance){var name=instance.charAt(0).toLowerCase()+instance.substr(1);var type="[object "+instance+"]";is[name]=function(value){return _toString.call(value)===type}});var PRIMITIVES={"[object Number]":true,"[object String]":true,"[object Boolean]":true,"[object Null]":true,"[object Undefined]":true};is.primitive=function(value){return!!PRIMITIVES[_toString.call(value)]}},{}],14:[function(require,module,exports){"use strict";var repeating=require("repeating");module.exports=function(str,indent,count){if(typeof str!=="string"||typeof indent!=="string"){throw new TypeError("`string` and `indent` should be strings")}if(count!=null&&typeof count!=="number"){throw new TypeError("`count` should be a number")}if(count===0){return str}indent=count>1?repeating(indent,count):indent;return str.replace(/^(?!\s*$)/gm,indent)}},{repeating:15}],15:[function(require,module,exports){"use strict";var isFinite=require("is-finite");module.exports=function(str,n){if(typeof str!=="string"){throw new TypeError("Expected `input` to be a string")}if(n<0||!isFinite(n)){throw new TypeError("Expected `count` to be a positive finite number")}var ret="";do{if(n&1){ret+=str}str+=str}while(n>>=1);return ret}},{"is-finite":16}],16:[function(require,module,exports){"use strict";var numberIsNan=require("number-is-nan");module.exports=Number.isFinite||function(val){return!(typeof val!=="number"||numberIsNan(val)||val===Infinity||val===-Infinity)}},{"number-is-nan":17}],17:[function(require,module,exports){"use strict";module.exports=Number.isNaN||function(x){return x!==x}},{}],18:[function(require,module,exports){"use strict";var res="";var cache;module.exports=repeat;function repeat(str,num){if(typeof str!=="string"){throw new TypeError("repeat-string expects a string.")}if(num===1)return str;if(num===2)return str+str;var max=str.length*num;if(cache!==str||typeof cache==="undefined"){cache=str;res=""}while(max>res.length&&num>0){if(num&1){res+=str}num>>=1;if(!num)break;str+=str}return res.substr(0,max)}},{}],19:[function(require,module,exports){"use strict";var stripAnsi=require("strip-ansi");module.exports=function(str){var reAstral=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return stripAnsi(str).replace(reAstral," ").length}},{"strip-ansi":20}],20:[function(require,module,exports){"use strict";var ansiRegex=require("ansi-regex")();module.exports=function(str){return typeof str==="string"?str.replace(ansiRegex,""):str}},{"ansi-regex":21}],21:[function(require,module,exports){"use strict";module.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g}},{}],22:[function(require,module,exports){module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;function extend(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target}},{}],23:[function(require,module,exports){var sanitize=require("./lib/sanitize");var stringify=require("./lib/stringify");module.exports=function(obj){return"#%RAML 0.8\n"+stringify(sanitize(obj))}},{"./lib/sanitize":2,"./lib/stringify":12}]},{},[23])(23)});